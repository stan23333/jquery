<!doctype html>
<html>
<head>
<meta charset = "utf-8">
  <title>全选按钮级联(双向)效果</title>
  <style type = "text/css">
	td{
		text-align:center;
	    font-size:32px;
	    line-height:36px;
	}
	input{
		display: inline-block;
		width: 24px;
		height: 24px;
	}
    input[type=button]{
        width: 100px;
    }
  </style>
  <script>
     
      
      //点击下面的一个复选框，都要把所有的子复选框都进行判定，只有下面所有子复选框都勾选了，上面的全选复选框才能勾选上
      function checkSingle(){
        var allCb=document.getElementById('all');
        var cbs=document.getElementsByName('product');
       /* for(var i=0;i<cbs.length;i++){
          if(cbs[i].checked==false){
              allCb.checked=false;
              break;
          }
        }
        if(i==cbs.length) allCb.checked=true;*/
        var n=0;   //n用来统计被勾选的子复选框的个数
        for(var i=0;i<cbs.length;i++){
          if(cbs[i].checked==true){
              n++;
          }
       }
     /*  if(n==cbs.length) allCb.checked=true;
       else allCb.checked=false;*/
      allCb.checked=(n==cbs.length); 
    }
  </script>
 </head>

<body>
   <table  border = "1" cellspacing = "0" cellpadding = "0"  width = "600px;" id="tb1" >
    <tr>
    	<td><input type = "checkbox" id = "all"  value =  "全选" />全选</td>
    	<td>商品名称</td>
    	<td>价格</td>
    </tr>
    <tr>
    	<td><input type = "checkbox" name = "product" /></td>
        <td>网页设计</td>
        <td>25</td>
    </tr>
    <tr>
    	<td><input type = "checkbox" name = "product"  /></td>
    	<td>css + div布局</td>
    	<td>26</td>
    </tr>
    <tr>
    	<td><input type = "checkbox" name = "product"  /></td>
    	<td>JavaScript程序设计</td>
    	<td>28</td>
    </tr>
    <tr>
      <td><input type = "checkbox" name = "product"  /></td>
      <td>JQuery程序设计</td>
      <td>28</td>
    </tr>
  </table>
  <script>
      //先获取要添加事件的对象
      var allCb=document.getElementById('all');
      var cbs=document.getElementsByName('product'); 
      //为全选复选框添加单击事件
      allCb.onclick=function(){
        for(var i=0;i<cbs.length;i++)
            cbs[i].checked=this.checked;
      }

      //为下面所有的子复选框添加单击事件
      for(var i=0;i<cbs.length;i++)
      {
        cbs[i].onclick=function(){
          var n=0;   //n用来统计被勾选的子复选框的个数
          for(var j=0;j<cbs.length;j++){
            if(cbs[j].checked==true){
                n++;
            }
          }
          allCb.checked=(n==cbs.length); 
        }
      }       
  </script>
</body>
</html>
