<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>瀑布流布局</title>
	<style>
		body{
			margin:0;
			padding:0;
			border-top:1px solid transparent;   /*处理body下的子div元素.items的外边距塌陷问题*/
		}
		img{
			width:100%;
		}
		.items{
			width:1000px;
			margin:10px auto;
			background-color: #999;
		}
		.item{
			background-color: white;
		}
	</style>
	
</head>
<body>
	<div class="items">
		<!-- <div class="item">
			<img src="images/1.jpg" alt="">
			<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		</div> -->
		<!-- div.item*100>img[src="images/$.jpg"]+p{图片描述图片描述图片描述图片描述图片描述图片描述图片描述} -->
		 <div class="item">
		 	<img src="images/1.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/2.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/3.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/4.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/5.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/6.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/7.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/8.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/9.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/10.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/11.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/12.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/13.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/14.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/15.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/16.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/17.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/18.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/19.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/20.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/21.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/22.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/23.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/24.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/25.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/26.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/27.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/28.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/29.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/30.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/31.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/32.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/33.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/34.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/35.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/36.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/37.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/38.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/39.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/40.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/41.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/42.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/43.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/44.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/45.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/46.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/47.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/48.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/49.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/50.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/51.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/52.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/53.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/54.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/55.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/56.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/57.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/58.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/59.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/60.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/61.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/62.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/63.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/64.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/65.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/66.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/67.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/68.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/69.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/70.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/71.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/72.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/73.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/74.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/75.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/76.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/77.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/78.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/79.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/80.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/81.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/82.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/83.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/84.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/85.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/86.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/87.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/88.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/89.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/90.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/91.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/92.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/93.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/94.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/95.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/96.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/97.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/98.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/99.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
		 <div class="item">
		 	<img src="images/100.jpg" alt="">
		 	<p>图片描述图片描述图片描述图片描述图片描述图片描述图片描述</p>
		 </div>
	</div>
	<!-- <h1>xxxxxxxxxx</h1> -->
	<script src="libs/jquery-1.12.4.min.js"></script>
	<script>
	//jQuery的原型可以通过$.fn来访问
		// j
		$.fn.waterfall=function(){
			//this指的是.items
			var container=$(this);
			var cWidth=container.width();  //获得外面盒子.items的宽度 
			// 假设有5列
			var col=5;
			var distance=10;  //设置间距为10px
			var width=(cWidth-4*distance)/5;  //减去中间的4个缝隙，剩下的平均
			var h=[];   //记录每一列的高度
			var elements=container.children();   //获取到盒子items内的所有子元素 
			container.css('position','relative'); //父盒子相对定位
			elements.each(function(key,val){
				// console.log(key,val);
				//console.log(this); 
				// $(val).width(width);  
				$(val).css({
					width:width,
					position:'absolute'
				});		
				//第一行top值为0
				if(key<col){
					$(val).css({
						top:0,
						left:key*(width+distance)
				    });
				    //第一行每一列的高度
				    h.push($(val).height()+distance);
				}
				else{  //其他行优先填补较“矮”的那一列
					var min_key=0;
					var min_val=h[0];
					/*
					$.each(h,function(k,v){
						if(v<min_val)
						{
							min_val=v;
							min_key=k;
						}
					});
					*/
					for(var i=0;i<h.length;i++)
					{
						if(h[i]<min_val)
						{
							min_val=h[i];
							min_key=i;
						}
					}
					$(val).css({
						top:min_val,
						left:min_key*(width+distance)
				    });
				    //更新对应列的高度值
				    h[min_key] += $(val).height()+distance;
				}
			});
			var max_val=h[0];
			for(var i=0;i<h.length;i++)
			{
				if(max_val<h[i]) max_val=h[i];
			}
			container.height(max_val);  //解决父盒子没高度的问题
		};
		$(".items").waterfall();
	</script>
</body>
</html>